{"ast":null,"code":"import{useState}from\"react\";import{useWorkoutsContext}from\"../hooks/useWorkoutsContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkoutForm=()=>{const{dispatch}=useWorkoutsContext();const{user}=useAuthContext();const[title,setTitle]=useState(\"\");const[load,setLoad]=useState(\"\");const[reps,setReps]=useState(\"\");const[error,setError]=useState(null);const[emptyFields,setEmptyFields]=useState([]);const handleSubmit=async e=>{e.preventDefault();if(!user){setError(\"‚ùå You must be logged in to add workouts.\");return;}const workout={title,load,reps};console.log(\"üì¢ Submitting Workout:\",workout);// Debugging Log\ntry{const response=await fetch(\"/api/workouts\",{method:\"POST\",body:JSON.stringify(workout),headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(user.token)}});const json=await response.json();console.log(\"üì¢ API Response:\",json);// Debugging Log\nif(!response.ok){setError(json.error||\"Something went wrong!\");setEmptyFields(json.emptyFields||[]);}else{console.log(\"‚úÖ Workout Added Successfully:\",json);setTitle(\"\");setLoad(\"\");setReps(\"\");setError(null);setEmptyFields([]);dispatch({type:\"CREATE_WORKOUT\",payload:json});}}catch(err){console.error(\"‚ùå Workout submission error:\",err.message);setError(\"Failed to connect to the server.\");}};return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Workout\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Exercise Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:e=>setTitle(e.target.value),value:title,className:emptyFields.includes(\"title\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Load (in kg):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setLoad(e.target.value),value:load,className:emptyFields.includes(\"load\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Reps:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setReps(e.target.value),value:reps,className:emptyFields.includes(\"reps\")?\"error\":\"\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Workout\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default WorkoutForm;","map":{"version":3,"names":["useState","useWorkoutsContext","useAuthContext","jsx","_jsx","jsxs","_jsxs","WorkoutForm","dispatch","user","title","setTitle","load","setLoad","reps","setReps","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","workout","console","log","response","fetch","method","body","JSON","stringify","headers","concat","token","json","ok","type","payload","err","message","className","onSubmit","children","onChange","target","value","includes"],"sources":["C:/Users/User/Downloads/L11webdev-main/L11webdev-main/frontend/src/components/WorkoutForm.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useWorkoutsContext } from \"../hooks/useWorkoutsContext\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\n\nconst WorkoutForm = () => {\n  const { dispatch } = useWorkoutsContext();\n  const { user } = useAuthContext();\n\n  const [title, setTitle] = useState(\"\");\n  const [load, setLoad] = useState(\"\");\n  const [reps, setReps] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [emptyFields, setEmptyFields] = useState([]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!user) {\n      setError(\"‚ùå You must be logged in to add workouts.\");\n      return;\n    }\n\n    const workout = { title, load, reps };\n    console.log(\"üì¢ Submitting Workout:\", workout); // Debugging Log\n\n    try {\n      const response = await fetch(\"/api/workouts\", {\n        method: \"POST\",\n        body: JSON.stringify(workout),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${user.token}`,\n        },\n      });\n\n      const json = await response.json();\n      console.log(\"üì¢ API Response:\", json); // Debugging Log\n\n      if (!response.ok) {\n        setError(json.error || \"Something went wrong!\");\n        setEmptyFields(json.emptyFields || []);\n      } else {\n        console.log(\"‚úÖ Workout Added Successfully:\", json);\n        setTitle(\"\");\n        setLoad(\"\");\n        setReps(\"\");\n        setError(null);\n        setEmptyFields([]);\n        dispatch({ type: \"CREATE_WORKOUT\", payload: json });\n      }\n    } catch (err) {\n      console.error(\"‚ùå Workout submission error:\", err.message);\n      setError(\"Failed to connect to the server.\");\n    }\n  };\n\n  return (\n    <form className=\"create\" onSubmit={handleSubmit}>\n      <h3>Add a New Workout</h3>\n\n      <label>Exercise Title:</label>\n      <input\n        type=\"text\"\n        onChange={(e) => setTitle(e.target.value)}\n        value={title}\n        className={emptyFields.includes(\"title\") ? \"error\" : \"\"}\n      />\n\n      <label>Load (in kg):</label>\n      <input\n        type=\"number\"\n        onChange={(e) => setLoad(e.target.value)}\n        value={load}\n        className={emptyFields.includes(\"load\") ? \"error\" : \"\"}\n      />\n\n      <label>Reps:</label>\n      <input\n        type=\"number\"\n        onChange={(e) => setReps(e.target.value)}\n        value={reps}\n        className={emptyFields.includes(\"reps\") ? \"error\" : \"\"}\n      />\n\n      <button>Add Workout</button>\n      {error && <div className=\"error\">{error}</div>}\n    </form>\n  );\n};\n\nexport default WorkoutForm;\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,cAAc,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,QAAS,CAAC,CAAGP,kBAAkB,CAAC,CAAC,CACzC,KAAM,CAAEQ,IAAK,CAAC,CAAGP,cAAc,CAAC,CAAC,CAEjC,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAElD,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACb,IAAI,CAAE,CACTQ,QAAQ,CAAC,0CAA0C,CAAC,CACpD,OACF,CAEA,KAAM,CAAAM,OAAO,CAAG,CAAEb,KAAK,CAAEE,IAAI,CAAEE,IAAK,CAAC,CACrCU,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEF,OAAO,CAAC,CAAE;AAEhD,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,eAAe,CAAE,CAC5CC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,OAAO,CAAC,CAC7BS,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYxB,IAAI,CAACyB,KAAK,CACvC,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCX,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEU,IAAI,CAAC,CAAE;AAEvC,GAAI,CAACT,QAAQ,CAACU,EAAE,CAAE,CAChBnB,QAAQ,CAACkB,IAAI,CAACnB,KAAK,EAAI,uBAAuB,CAAC,CAC/CG,cAAc,CAACgB,IAAI,CAACjB,WAAW,EAAI,EAAE,CAAC,CACxC,CAAC,IAAM,CACLM,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEU,IAAI,CAAC,CAClDxB,QAAQ,CAAC,EAAE,CAAC,CACZE,OAAO,CAAC,EAAE,CAAC,CACXE,OAAO,CAAC,EAAE,CAAC,CACXE,QAAQ,CAAC,IAAI,CAAC,CACdE,cAAc,CAAC,EAAE,CAAC,CAClBX,QAAQ,CAAC,CAAE6B,IAAI,CAAE,gBAAgB,CAAEC,OAAO,CAAEH,IAAK,CAAC,CAAC,CACrD,CACF,CAAE,MAAOI,GAAG,CAAE,CACZf,OAAO,CAACR,KAAK,CAAC,6BAA6B,CAAEuB,GAAG,CAACC,OAAO,CAAC,CACzDvB,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CACF,CAAC,CAED,mBACEX,KAAA,SAAMmC,SAAS,CAAC,QAAQ,CAACC,QAAQ,CAAEtB,YAAa,CAAAuB,QAAA,eAC9CvC,IAAA,OAAAuC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAE1BvC,IAAA,UAAAuC,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BvC,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXO,QAAQ,CAAGvB,CAAC,EAAKV,QAAQ,CAACU,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAE,CAC1CA,KAAK,CAAEpC,KAAM,CACb+B,SAAS,CAAEvB,WAAW,CAAC6B,QAAQ,CAAC,OAAO,CAAC,CAAG,OAAO,CAAG,EAAG,CACzD,CAAC,cAEF3C,IAAA,UAAAuC,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5BvC,IAAA,UACEiC,IAAI,CAAC,QAAQ,CACbO,QAAQ,CAAGvB,CAAC,EAAKR,OAAO,CAACQ,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAE,CACzCA,KAAK,CAAElC,IAAK,CACZ6B,SAAS,CAAEvB,WAAW,CAAC6B,QAAQ,CAAC,MAAM,CAAC,CAAG,OAAO,CAAG,EAAG,CACxD,CAAC,cAEF3C,IAAA,UAAAuC,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBvC,IAAA,UACEiC,IAAI,CAAC,QAAQ,CACbO,QAAQ,CAAGvB,CAAC,EAAKN,OAAO,CAACM,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAE,CACzCA,KAAK,CAAEhC,IAAK,CACZ2B,SAAS,CAAEvB,WAAW,CAAC6B,QAAQ,CAAC,MAAM,CAAC,CAAG,OAAO,CAAG,EAAG,CACxD,CAAC,cAEF3C,IAAA,WAAAuC,QAAA,CAAQ,aAAW,CAAQ,CAAC,CAC3B3B,KAAK,eAAIZ,IAAA,QAAKqC,SAAS,CAAC,OAAO,CAAAE,QAAA,CAAE3B,KAAK,CAAM,CAAC,EAC1C,CAAC,CAEX,CAAC,CAED,cAAe,CAAAT,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}