{"ast":null,"code":"import{useEffect,useState,useCallback}from'react';import{useWorkoutsContext}from\"../hooks/useWorkoutsContext\";import{useAuthContext}from\"../hooks/useAuthContext\";// components\nimport WorkoutDetails from'../components/WorkoutDetails';import WorkoutForm from'../components/WorkoutForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const{workouts,dispatch}=useWorkoutsContext();const{user}=useAuthContext();const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Fetch workouts function (memoized to prevent recreation)\nconst fetchWorkouts=useCallback(async()=>{if(!user)return;setLoading(true);setError(null);try{const response=await fetch('/api/workouts',{headers:{'Authorization':\"Bearer \".concat(user.token)}});const json=await response.json();if(!response.ok)throw new Error(json.error||'Failed to fetch workouts');dispatch({type:'SET_WORKOUTS',payload:json});}catch(err){setError(err.message);}finally{setLoading(false);}},[dispatch,user]);// Fetch workouts on mount and when `user` changes\nuseEffect(()=>{fetchWorkouts();},[fetchWorkouts]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"workouts\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading workouts...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),workouts===null||workouts===void 0?void 0:workouts.map(workout=>/*#__PURE__*/_jsx(WorkoutDetails,{workout:workout},workout._id))]}),/*#__PURE__*/_jsx(WorkoutForm,{})]});};export default Home;","map":{"version":3,"names":["useEffect","useState","useCallback","useWorkoutsContext","useAuthContext","WorkoutDetails","WorkoutForm","jsx","_jsx","jsxs","_jsxs","Home","workouts","dispatch","user","loading","setLoading","error","setError","fetchWorkouts","response","fetch","headers","concat","token","json","ok","Error","type","payload","err","message","className","children","map","workout","_id"],"sources":["C:/Users/User/Downloads/L11webdev-main/L11webdev-main/frontend/src/pages/Home.js"],"sourcesContent":["import { useEffect, useState, useCallback } from 'react'\nimport { useWorkoutsContext } from \"../hooks/useWorkoutsContext\"\nimport { useAuthContext } from \"../hooks/useAuthContext\"\n\n// components\nimport WorkoutDetails from '../components/WorkoutDetails'\nimport WorkoutForm from '../components/WorkoutForm'\n\nconst Home = () => {\n  const { workouts, dispatch } = useWorkoutsContext()\n  const { user } = useAuthContext()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(null)\n\n  // Fetch workouts function (memoized to prevent recreation)\n  const fetchWorkouts = useCallback(async () => {\n    if (!user) return\n\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch('/api/workouts', {\n        headers: { 'Authorization': `Bearer ${user.token}` },\n      })\n      const json = await response.json()\n\n      if (!response.ok) throw new Error(json.error || 'Failed to fetch workouts')\n\n      dispatch({ type: 'SET_WORKOUTS', payload: json })\n    } catch (err) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }, [dispatch, user])\n\n  // Fetch workouts on mount and when `user` changes\n  useEffect(() => {\n    fetchWorkouts()\n  }, [fetchWorkouts])\n\n  return (\n    <div className=\"home\">\n      <div className=\"workouts\">\n        {loading && <p>Loading workouts...</p>}\n        {error && <p className=\"error\">{error}</p>}\n        {workouts?.map(workout => (\n          <WorkoutDetails key={workout._id} workout={workout} />\n        ))}\n      </div>\n      <WorkoutForm />\n    </div>\n  )\n}\n\nexport default Home\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACxD,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,cAAc,KAAQ,yBAAyB,CAExD;AACA,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAEC,QAAQ,CAAEC,QAAS,CAAC,CAAGV,kBAAkB,CAAC,CAAC,CACnD,KAAM,CAAEW,IAAK,CAAC,CAAGV,cAAc,CAAC,CAAC,CACjC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAAAkB,aAAa,CAAGjB,WAAW,CAAC,SAAY,CAC5C,GAAI,CAACY,IAAI,CAAE,OAEXE,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,eAAe,CAAE,CAC5CC,OAAO,CAAE,CAAE,eAAe,WAAAC,MAAA,CAAYT,IAAI,CAACU,KAAK,CAAG,CACrD,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACK,IAAI,CAAC,CAAC,CAElC,GAAI,CAACL,QAAQ,CAACM,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAACF,IAAI,CAACR,KAAK,EAAI,0BAA0B,CAAC,CAE3EJ,QAAQ,CAAC,CAAEe,IAAI,CAAE,cAAc,CAAEC,OAAO,CAAEJ,IAAK,CAAC,CAAC,CACnD,CAAE,MAAOK,GAAG,CAAE,CACZZ,QAAQ,CAACY,GAAG,CAACC,OAAO,CAAC,CACvB,CAAC,OAAS,CACRf,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACH,QAAQ,CAAEC,IAAI,CAAC,CAAC,CAEpB;AACAd,SAAS,CAAC,IAAM,CACdmB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACA,aAAa,CAAC,CAAC,CAEnB,mBACET,KAAA,QAAKsB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvB,KAAA,QAAKsB,SAAS,CAAC,UAAU,CAAAC,QAAA,EACtBlB,OAAO,eAAIP,IAAA,MAAAyB,QAAA,CAAG,qBAAmB,CAAG,CAAC,CACrChB,KAAK,eAAIT,IAAA,MAAGwB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEhB,KAAK,CAAI,CAAC,CACzCL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEsB,GAAG,CAACC,OAAO,eACpB3B,IAAA,CAACH,cAAc,EAAmB8B,OAAO,CAAEA,OAAQ,EAA9BA,OAAO,CAACC,GAAwB,CACtD,CAAC,EACC,CAAC,cACN5B,IAAA,CAACF,WAAW,GAAE,CAAC,EACZ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}